// ============================================
// üéØ FRONTEND - REACT NATIVE (Expo)
// ============================================

// üì± App.js - MAIN ENTRY POINT
import React, { useState, useEffect } from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { SafeAreaView, StyleSheet, Text, View, Image, TouchableOpacity, ScrollView, TextInput, Modal, ActivityIndicator, Alert } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import * as ImagePicker from 'expo-image-picker';
import * as FileSystem from 'expo-file-system';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { LinearGradient } from 'expo-linear-gradient';
import { StripeProvider } from '@stripe/stripe-react-native';

// üé® THEME CONSTANTS
const COLORS = {
  primary: '#6366F1',
  primaryDark: '#4F46E5',
  primaryLight: '#818CF8',
  secondary: '#10B981',
  background: '#0F172A',
  surface: '#1E293B',
  card: '#334155',
  border: '#475569',
  textPrimary: '#F1F5F9',
  textSecondary: '#94A3B8',
  error: '#EF4444',
  success: '#10B981',
  warning: '#F59E0B'
};

const SPACING = { xs: 4, sm: 8, md: 16, lg: 24, xl: 32 };
const BORDER_RADIUS = { sm: 4, md: 8, lg: 12, xl: 16, full: 9999 };

// üîß UTILITY FUNCTIONS
const api = {
  post: async (endpoint, data) => {
    const token = await AsyncStorage.getItem('token');
    const response = await fetch(`http://localhost:3000/api${endpoint}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`
      },
      body: JSON.stringify(data)
    });
    return response.json();
  },
  get: async (endpoint) => {
    const token = await AsyncStorage.getItem('token');
    const response = await fetch(`http://localhost:3000/api${endpoint}`, {
      headers: { 'Authorization': `Bearer ${token}` }
    });
    return response.json();
  }
};

// üéØ CUSTOM COMPONENTS
const Button = ({ title, onPress, variant = 'primary', size = 'md', loading = false, disabled = false, icon, style }) => {
  const getStyle = () => {
    const base = { paddingVertical: size === 'sm' ? 8 : size === 'lg' ? 16 : 12, paddingHorizontal: 20, borderRadius: BORDER_RADIUS.lg, alignItems: 'center', justifyContent: 'center' };
    if (variant === 'primary') return { ...base, backgroundColor: COLORS.primary };
    if (variant === 'outline') return { ...base, backgroundColor: 'transparent', borderWidth: 1, borderColor: COLORS.border };
    return base;
  };
  
  const getTextStyle = () => ({
    color: variant === 'primary' ? '#fff' : COLORS.textPrimary,
    fontSize: size === 'sm' ? 14 : size === 'lg' ? 18 : 16,
    fontWeight: '600'
  });
  
  return (
    <TouchableOpacity style={[getStyle(), style]} onPress={onPress} disabled={disabled || loading}>
      {loading ? <ActivityIndicator color={variant === 'primary' ? '#fff' : COLORS.primary} /> :
        <View style={{ flexDirection: 'row', alignItems: 'center' }}>
          {icon && <View style={{ marginRight: 8 }}>{icon}</View>}
          <Text style={getTextStyle()}>{title}</Text>
        </View>
      }
    </TouchableOpacity>
  );
};

const Input = ({ label, value, onChangeText, error, secureTextEntry, placeholder, ...props }) => (
  <View style={{ marginBottom: SPACING.md }}>
    {label && <Text style={{ color: COLORS.textPrimary, marginBottom: 4, fontSize: 14 }}>{label}</Text>}
    <View style={{ borderWidth: 1, borderColor: error ? COLORS.error : COLORS.border, borderRadius: BORDER_RADIUS.md, paddingHorizontal: SPACING.md }}>
      <TextInput
        style={{ color: COLORS.textPrimary, paddingVertical: SPACING.sm, fontSize: 16 }}
        value={value}
        onChangeText={onChangeText}
        secureTextEntry={secureTextEntry}
        placeholder={placeholder}
        placeholderTextColor={COLORS.textSecondary}
        {...props}
      />
    </View>
    {error && <Text style={{ color: COLORS.error, fontSize: 12, marginTop: 4 }}>{error}</Text>}
  </View>
);

const Card = ({ children, style }) => (
  <View style={[{ backgroundColor: COLORS.surface, borderRadius: BORDER_RADIUS.lg, padding: SPACING.lg }, style]}>
    {children}
  </View>
);

// üîê AUTH SCREENS
const LoginScreen = ({ navigation }) => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);
  
  const handleLogin = async () => {
    if (!email || !password) {
      Alert.alert('Error', 'Please fill all fields');
      return;
    }
    
    setLoading(true);
    try {
      const response = await api.post('/auth/login', { email, password });
      if (response.accessToken) {
        await AsyncStorage.setItem('token', response.accessToken);
        await AsyncStorage.setItem('user', JSON.stringify(response.user));
        navigation.replace('Main');
      } else {
        Alert.alert('Error', response.error || 'Login failed');
      }
    } catch (error) {
      Alert.alert('Error', 'Login failed');
    } finally {
      setLoading(false);
    }
  };
  
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: COLORS.background }}>
      <ScrollView contentContainerStyle={{ padding: SPACING.lg }}>
        <LinearGradient colors={['#000', COLORS.background]} style={{ padding: SPACING.xl, borderRadius: BORDER_RADIUS.xl, marginBottom: SPACING.lg }}>
          <Ionicons name="videocam" size={60} color={COLORS.primary} style={{ alignSelf: 'center', marginBottom: SPACING.md }} />
          <Text style={{ color: COLORS.textPrimary, fontSize: 32, fontWeight: 'bold', textAlign: 'center', marginBottom: SPACING.xs }}>AI Video Studio</Text>
          <Text style={{ color: COLORS.textSecondary, textAlign: 'center' }}>Transform photos into amazing videos</Text>
        </LinearGradient>
        
        <Card>
          <Text style={{ color: COLORS.textPrimary, fontSize: 24, fontWeight: 'bold', marginBottom: SPACING.sm }}>Welcome Back</Text>
          <Text style={{ color: COLORS.textSecondary, marginBottom: SPACING.lg }}>Sign in to continue</Text>
          
          <Input label="Email" value={email} onChangeText={setEmail} placeholder="Enter your email" autoCapitalize="none" />
          <Input label="Password" value={password} onChangeText={setPassword} placeholder="Enter your password" secureTextEntry />
          
          <Button title="Sign In" onPress={handleLogin} loading={loading} style={{ marginTop: SPACING.md }} />
          
          <View style={{ flexDirection: 'row', justifyContent: 'center', marginTop: SPACING.lg }}>
            <Text style={{ color: COLORS.textSecondary }}>Don't have an account? </Text>
            <TouchableOpacity onPress={() => navigation.navigate('Register')}>
              <Text style={{ color: COLORS.primary, fontWeight: '600' }}>Sign Up</Text>
            </TouchableOpacity>
          </View>
        </Card>
      </ScrollView>
    </SafeAreaView>
  );
};

const RegisterScreen = ({ navigation }) => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [username, setUsername] = useState('');
  const [loading, setLoading] = useState(false);
  
  const handleRegister = async () => {
    if (!email || !password || !username) {
      Alert.alert('Error', 'Please fill all fields');
      return;
    }
    
    setLoading(true);
    try {
      const response = await api.post('/auth/register', { email, password, username });
      if (response.accessToken) {
        await AsyncStorage.setItem('token', response.accessToken);
        await AsyncStorage.setItem('user', JSON.stringify(response.user));
        navigation.replace('Main');
      } else {
        Alert.alert('Error', response.error || 'Registration failed');
      }
    } catch (error) {
      Alert.alert('Error', 'Registration failed');
    } finally {
      setLoading(false);
    }
  };
  
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: COLORS.background }}>
      <ScrollView contentContainerStyle={{ padding: SPACING.lg }}>
        <Card>
          <Text style={{ color: COLORS.textPrimary, fontSize: 24, fontWeight: 'bold', marginBottom: SPACING.lg }}>Create Account</Text>
          
          <Input label="Username" value={username} onChangeText={setUsername} placeholder="Choose a username" autoCapitalize="none" />
          <Input label="Email" value={email} onChangeText={setEmail} placeholder="Enter your email" autoCapitalize="none" keyboardType="email-address" />
          <Input label="Password" value={password} onChangeText={setPassword} placeholder="Create a password" secureTextEntry />
          
          <Button title="Create Account" onPress={handleRegister} loading={loading} style={{ marginTop: SPACING.md }} />
          
          <View style={{ flexDirection: 'row', justifyContent: 'center', marginTop: SPACING.lg }}>
            <Text style={{ color: COLORS.textSecondary }}>Already have an account? </Text>
            <TouchableOpacity onPress={() => navigation.navigate('Login')}>
              <Text style={{ color: COLORS.primary, fontWeight: '600' }}>Sign In</Text>
            </TouchableOpacity>
          </View>
        </Card>
      </ScrollView>
    </SafeAreaView>
  );
};

// üé¨ MAIN VIDEO CREATION SCREEN
const CreateScreen = () => {
  const [selectedImage, setSelectedImage] = useState(null);
  const [selectedTask, setSelectedTask] = useState(null);
  const [watermark, setWatermark] = useState({ text: '@MyVideo', enabled: true, position: 'bottom-right', opacity: 0.7 });
  const [loading, setLoading] = useState(false);
  const [progress, setProgress] = useState(0);
  const [showTasks, setShowTasks] = useState(false);
  
  const tasks = [
    { id: 'zoom', name: 'Cinematic Zoom', icon: 'videocam', color: COLORS.primary, prompt: 'cinematic zoom in effect' },
    { id: 'pan', name: 'Pan Motion', icon: 'scan', color: COLORS.secondary, prompt: 'smooth pan movement' },
    { id: 'particles', name: 'Particle Magic', icon: 'sparkles', color: '#8B5CF6', prompt: 'magical particle effects' },
    { id: 'neon', name: 'Neon Glow', icon: 'flash', color: '#EC4899', prompt: 'neon glow cyberpunk' },
    { id: 'water', name: 'Water Reflection', icon: 'water', color: '#3B82F6', prompt: 'water reflection animation' }
  ];
  
  const pickImage = async () => {
    const result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ImagePicker.MediaTypeOptions.Images,
      allowsEditing: true,
      aspect: [16, 9],
      quality: 0.8,
    });
    
    if (!result.canceled) {
      setSelectedImage(result.assets[0]);
    }
  };
  
  const handleGenerate = async () => {
    if (!selectedImage || !selectedTask) {
      Alert.alert('Error', 'Please select an image and effect');
      return;
    }
    
    setLoading(true);
    setProgress(0);
    
    try {
      // Convert image to base64
      const base64Image = await FileSystem.readAsStringAsync(selectedImage.uri, { 
        encoding: FileSystem.EncodingType.Base64 
      });
      
      setProgress(30);
      
      // Call API to generate video
      const response = await api.post('/video/generate', {
        image: base64Image,
        taskId: selectedTask.id,
        watermark: watermark
      });
      
      setProgress(100);
      
      if (response.videoUrl) {
        Alert.alert('Success', 'Video generated successfully!', [
          { text: 'OK', onPress: () => {
            setSelectedImage(null);
            setSelectedTask(null);
          }}
        ]);
      }
    } catch (error) {
      Alert.alert('Error', 'Failed to generate video');
    } finally {
      setLoading(false);
    }
  };
  
  const selectRandomTask = () => {
    const randomIndex = Math.floor(Math.random() * tasks.length);
    setSelectedTask(tasks[randomIndex]);
  };
  
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: COLORS.background }}>
      <ScrollView contentContainerStyle={{ padding: SPACING.lg }}>
        {/* Header */}
        <LinearGradient colors={[COLORS.primary, COLORS.primaryDark]} style={{ padding: SPACING.xl, borderRadius: BORDER_RADIUS.xl, marginBottom: SPACING.lg }}>
          <Text style={{ color: '#fff', fontSize: 28, fontWeight: 'bold', marginBottom: SPACING.xs }}>Create AI Video</Text>
          <Text style={{ color: 'rgba(255,255,255,0.8)' }}>Transform your photos with AI magic</Text>
        </LinearGradient>
        
        {/* Step 1: Select Image */}
        <Card style={{ marginBottom: SPACING.lg }}>
          <Text style={{ color: COLORS.textPrimary, fontSize: 18, fontWeight: '600', marginBottom: SPACING.md }}>1. Select Photo</Text>
          
          {selectedImage ? (
            <View>
              <Image source={{ uri: selectedImage.uri }} style={{ width: '100%', height: 200, borderRadius: BORDER_RADIUS.lg }} />
              <TouchableOpacity onPress={() => setSelectedImage(null)} style={{ position: 'absolute', top: 8, right: 8, backgroundColor: 'rgba(0,0,0,0.5)', borderRadius: 20, padding: 4 }}>
                <Ionicons name="close" size={20} color="#fff" />
              </TouchableOpacity>
            </View>
          ) : (
            <TouchableOpacity onPress={pickImage} style={{ borderWidth: 2, borderColor: COLORS.border, borderStyle: 'dashed', borderRadius: BORDER_RADIUS.lg, padding: SPACING.xl, alignItems: 'center' }}>
              <Ionicons name="image" size={48} color={COLORS.primary} />
              <Text style={{ color: COLORS.textPrimary, marginTop: SPACING.md, fontSize: 16 }}>Tap to select photo</Text>
              <Text style={{ color: COLORS.textSecondary, fontSize: 14 }}>JPG, PNG up to 10MB</Text>
            </TouchableOpacity>
          )}
        </Card>
        
        {/* Step 2: Select Task */}
        <Card style={{ marginBottom: SPACING.lg }}>
          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: SPACING.md }}>
            <Text style={{ color: COLORS.textPrimary, fontSize: 18, fontWeight: '600' }}>2. Choose Effect</Text>
            <TouchableOpacity onPress={selectRandomTask} style={{ flexDirection: 'row', alignItems: 'center', paddingHorizontal: SPACING.sm, paddingVertical: 4, backgroundColor: `${COLORS.primary}20`, borderRadius: BORDER_RADIUS.md }}>
              <Ionicons name="shuffle" size={16} color={COLORS.primary} />
              <Text style={{ color: COLORS.primary, marginLeft: 4, fontSize: 14 }}>Random</Text>
            </TouchableOpacity>
          </View>
          
          {selectedTask ? (
            <View style={{ flexDirection: 'row', alignItems: 'center', padding: SPACING.md, backgroundColor: COLORS.card, borderRadius: BORDER_RADIUS.lg }}>
              <View style={{ width: 50, height: 50, borderRadius: 25, backgroundColor: selectedTask.color, alignItems: 'center', justifyContent: 'center', marginRight: SPACING.md }}>
                <Ionicons name={selectedTask.icon} size={24} color="#fff" />
              </View>
              <View style={{ flex: 1 }}>
                <Text style={{ color: COLORS.textPrimary, fontSize: 16, fontWeight: '600' }}>{selectedTask.name}</Text>
                <Text style={{ color: COLORS.textSecondary, fontSize: 14 }}>AI-powered video effect</Text>
              </View>
              <TouchableOpacity onPress={() => setShowTasks(true)}>
                <Text style={{ color: COLORS.primary }}>Change</Text>
              </TouchableOpacity>
            </View>
          ) : (
            <TouchableOpacity onPress={() => setShowTasks(true)} style={{ borderWidth: 2, borderColor: COLORS.border, borderStyle: 'dashed', borderRadius: BORDER_RADIUS.lg, padding: SPACING.xl, alignItems: 'center' }}>
              <Ionicons name="sparkles" size={32} color={COLORS.primary} />
              <Text style={{ color: COLORS.textPrimary, marginTop: SPACING.md, fontSize: 16 }}>Select AI Effect</Text>
              <Text style={{ color: COLORS.textSecondary, fontSize: 14 }}>Tap to choose</Text>
            </TouchableOpacity>
          )}
        </Card>
        
        {/* Step 3: Watermark Settings */}
        <Card style={{ marginBottom: SPACING.lg }}>
          <Text style={{ color: COLORS.textPrimary, fontSize: 18, fontWeight: '600', marginBottom: SPACING.md }}>3. Watermark Settings</Text>
          
          <View style={{ marginBottom: SPACING.md }}>
            <Text style={{ color: COLORS.textSecondary, marginBottom: SPACING.xs }}>Watermark Text</Text>
            <TextInput
              style={{ backgroundColor: COLORS.card, color: COLORS.textPrimary, padding: SPACING.sm, borderRadius: BORDER_RADIUS.md }}
              value={watermark.text}
              onChangeText={(text) => setWatermark({ ...watermark, text })}
              placeholder="Enter watermark text"
            />
          </View>
          
          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>
            <Text style={{ color: COLORS.textPrimary }}>Show Watermark</Text>
            <TouchableOpacity
              style={{ width: 50, height: 28, borderRadius: 14, backgroundColor: watermark.enabled ? COLORS.primary : COLORS.border, padding: 2 }}
              onPress={() => setWatermark({ ...watermark, enabled: !watermark.enabled })}
            >
              <View style={{ width: 24, height: 24, borderRadius: 12, backgroundColor: '#fff', transform: [{ translateX: watermark.enabled ? 22 : 0 }] }} />
            </TouchableOpacity>
          </View>
        </Card>
        
        {/* Generate Button */}
        <Button
          title={loading ? `Generating... ${progress}%` : "Generate Video"}
          onPress={handleGenerate}
          loading={loading}
          disabled={!selectedImage || !selectedTask || loading}
          style={{ marginBottom: SPACING.lg }}
        />
        
        {/* Info Cards */}
        <View style={{ flexDirection: 'row', gap: SPACING.md }}>
          <Card style={{ flex: 1 }}>
            <Ionicons name="flash" size={24} color={COLORS.primary} />
            <Text style={{ color: COLORS.textPrimary, marginTop: SPACING.sm, fontWeight: '600' }}>Fast</Text>
            <Text style={{ color: COLORS.textSecondary, fontSize: 12 }}>30-60 seconds</Text>
          </Card>
          
          <Card style={{ flex: 1 }}>
            <Ionicons name="infinite" size={24} color={COLORS.secondary} />
            <Text style={{ color: COLORS.textPrimary, marginTop: SPACING.sm, fontWeight: '600' }}>Unlimited</Text>
            <Text style={{ color: COLORS.textSecondary, fontSize: 12 }}>New effects weekly</Text>
          </Card>
        </View>
      </ScrollView>
      
      {/* Tasks Modal */}
      <Modal visible={showTasks} animationType="slide" transparent>
        <View style={{ flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'flex-end' }}>
          <View style={{ backgroundColor: COLORS.surface, borderTopLeftRadius: BORDER_RADIUS.xl, borderTopRightRadius: BORDER_RADIUS.xl, maxHeight: '60%' }}>
            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: SPACING.lg, borderBottomWidth: 1, borderBottomColor: COLORS.border }}>
              <Text style={{ color: COLORS.textPrimary, fontSize: 20, fontWeight: 'bold' }}>Select Effect</Text>
              <TouchableOpacity onPress={() => setShowTasks(false)}>
                <Ionicons name="close" size={24} color={COLORS.textPrimary} />
              </TouchableOpacity>
            </View>
            
            <ScrollView style={{ padding: SPACING.lg }}>
              {tasks.map((task) => (
                <TouchableOpacity
                  key={task.id}
                  onPress={() => {
                    setSelectedTask(task);
                    setShowTasks(false);
                  }}
                  style={{ flexDirection: 'row', alignItems: 'center', padding: SPACING.md, backgroundColor: COLORS.card, borderRadius: BORDER_RADIUS.lg, marginBottom: SPACING.md }}
                >
                  <View style={{ width: 40, height: 40, borderRadius: 20, backgroundColor: task.color, alignItems: 'center', justifyContent: 'center', marginRight: SPACING.md }}>
                    <Ionicons name={task.icon} size={20} color="#fff" />
                  </View>
                  <Text style={{ color: COLORS.textPrimary, fontSize: 16, flex: 1 }}>{task.name}</Text>
                  <Ionicons name="chevron-forward" size={20} color={COLORS.textSecondary} />
                </TouchableOpacity>
              ))}
            </ScrollView>
          </View>
        </View>
      </Modal>
      
      {/* Loading Modal */}
      <Modal visible={loading} transparent animationType="fade">
        <View style={{ flex: 1, backgroundColor: 'rgba(0,0,0,0.7)', justifyContent: 'center', alignItems: 'center' }}>
          <Card style={{ width: '80%', alignItems: 'center' }}>
            <ActivityIndicator size="large" color={COLORS.primary} />
            <Text style={{ color: COLORS.textPrimary, marginTop: SPACING.md, fontSize: 18, fontWeight: '600' }}>Generating Video</Text>
            <Text style={{ color: COLORS.textSecondary, marginTop: SPACING.xs }}>{selectedTask?.name}</Text>
            
            {/* Progress Bar */}
            <View style={{ width: '100%', height: 4, backgroundColor: COLORS.border, borderRadius: 2, marginTop: SPACING.lg }}>
              <View style={{ width: `${progress}%`, height: '100%', backgroundColor: COLORS.primary, borderRadius: 2 }} />
            </View>
            <Text style={{ color: COLORS.textSecondary, marginTop: SPACING.sm }}>{progress}% complete</Text>
          </Card>
        </View>
      </Modal>
    </SafeAreaView>
  );
};

// üè† HOME SCREEN
const HomeScreen = ({ navigation }) => {
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: COLORS.background }}>
      <ScrollView contentContainerStyle={{ padding: SPACING.lg }}>
        <LinearGradient colors={[COLORS.primary, COLORS.primaryDark]} style={{ padding: SPACING.xl, borderRadius: BORDER_RADIUS.xl, marginBottom: SPACING.lg }}>
          <Text style={{ color: '#fff', fontSize: 32, fontWeight: 'bold', marginBottom: SPACING.xs }}>AI Video Magic</Text>
          <Text style={{ color: 'rgba(255,255,255,0.8)' }}>Transform photos into stunning videos</Text>
        </LinearGradient>
        
        <Card style={{ marginBottom: SPACING.lg }}>
          <Text style={{ color: COLORS.textPrimary, fontSize: 20, fontWeight: 'bold', marginBottom: SPACING.md }}>Quick Actions</Text>
          
          <TouchableOpacity onPress={() => navigation.navigate('Create')} style={{ flexDirection: 'row', alignItems: 'center', padding: SPACING.lg, backgroundColor: COLORS.card, borderRadius: BORDER_RADIUS.lg, marginBottom: SPACING.md }}>
            <View style={{ width: 50, height: 50, borderRadius: 25, backgroundColor: `${COLORS.primary}20`, alignItems: 'center', justifyContent: 'center', marginRight: SPACING.md }}>
              <Ionicons name="add" size={24} color={COLORS.primary} />
            </View>
            <View style={{ flex: 1 }}>
              <Text style={{ color: COLORS.textPrimary, fontSize: 16, fontWeight: '600' }}>Create New Video</Text>
              <Text style={{ color: COLORS.textSecondary, fontSize: 14 }}>Upload photo and apply effects</Text>
            </View>
            <Ionicons name="chevron-forward" size={20} color={COLORS.textSecondary} />
          </TouchableOpacity>
          
          <TouchableOpacity onPress={() => navigation.navigate('Gallery')} style={{ flexDirection: 'row', alignItems: 'center', padding: SPACING.lg, backgroundColor: COLORS.card, borderRadius: BORDER_RADIUS.lg }}>
            <View style={{ width: 50, height: 50, borderRadius: 25, backgroundColor: `${COLORS.secondary}20`, alignItems: 'center', justifyContent: 'center', marginRight: SPACING.md }}>
              <Ionicons name="film" size={24} color={COLORS.secondary} />
            </View>
            <View style={{ flex: 1 }}>
              <Text style={{ color: COLORS.textPrimary, fontSize: 16, fontWeight: '600' }}>My Gallery</Text>
              <Text style={{ color: COLORS.textSecondary, fontSize: 14 }}>View all generated videos</Text>
            </View>
            <Ionicons name="chevron-forward" size={20} color={COLORS.textSecondary} />
          </TouchableOpacity>
        </Card>
        
        <Card>
          <Text style={{ color: COLORS.textPrimary, fontSize: 20, fontWeight: 'bold', marginBottom: SPACING.md }}>Featured Effects</Text>
          
          <ScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginHorizontal: -SPACING.lg, paddingHorizontal: SPACING.lg }}>
            {[
              { name: 'Cinematic Zoom', icon: 'videocam', color: COLORS.primary },
              { name: 'Particle Magic', icon: 'sparkles', color: '#8B5CF6' },
              { name: 'Neon Glow', icon: 'flash', color: '#EC4899' },
              { name: 'Water Effect', icon: 'water', color: '#3B82F6' }
            ].map((effect, index) => (
              <View key={index} style={{ width: 150, backgroundColor: COLORS.card, borderRadius: BORDER_RADIUS.lg, padding: SPACING.lg, marginRight: SPACING.md }}>
                <View style={{ width: 40, height: 40, borderRadius: 20, backgroundColor: effect.color, alignItems: 'center', justifyContent: 'center', marginBottom: SPACING.md }}>
                  <Ionicons name={effect.icon} size={20} color="#fff" />
                </View>
                <Text style={{ color: COLORS.textPrimary, fontWeight: '600' }}>{effect.name}</Text>
                <Text style={{ color: COLORS.textSecondary, fontSize: 12, marginTop: 2 }}>AI-powered effect</Text>
              </View>
            ))}
          </ScrollView>
        </Card>
      </ScrollView>
    </SafeAreaView>
  );
};

// üñºÔ∏è GALLERY SCREEN
const GalleryScreen = () => {
  const [videos, setVideos] = useState([]);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    loadVideos();
  }, []);
  
  const loadVideos = async () => {
    try {
      const response = await api.get('/video/videos');
      setVideos(response.videos || []);
    } catch (error) {
      console.error('Error loading videos:', error);
    } finally {
      setLoading(false);
    }
  };
  
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: COLORS.background }}>
      <ScrollView contentContainerStyle={{ padding: SPACING.lg }}>
        <Text style={{ color: COLORS.textPrimary, fontSize: 28, fontWeight: 'bold', marginBottom: SPACING.lg }}>My Videos</Text>
        
        {loading ? (
          <ActivityIndicator size="large" color={COLORS.primary} />
        ) : videos.length === 0 ? (
          <Card style={{ alignItems: 'center', padding: SPACING.xl }}>
            <Ionicons name="film" size={48} color={COLORS.textSecondary} />
            <Text style={{ color: COLORS.textPrimary, fontSize: 18, fontWeight: '600', marginTop: SPACING.md }}>No videos yet</Text>
            <Text style={{ color: COLORS.textSecondary, textAlign: 'center', marginTop: SPACING.xs }}>Create your first AI video!</Text>
          </Card>
        ) : (
          <View style={{ flexDirection: 'row', flexWrap: 'wrap', marginHorizontal: -SPACING.xs }}>
            {videos.map((video, index) => (
              <View key={index} style={{ width: '50%', padding: SPACING.xs }}>
                <Card>
                  <View style={{ width: '100%', aspectRatio: 16/9, backgroundColor: COLORS.card, borderRadius: BORDER_RADIUS.md, marginBottom: SPACING.sm }} />
                  <Text style={{ color: COLORS.textPrimary, fontSize: 14, fontWeight: '600' }}>{video.task || 'Video'}</Text>
                  <Text style={{ color: COLORS.textSecondary, fontSize: 12 }}>{new Date(video.createdAt).toLocaleDateString()}</Text>
                </Card>
              </View>
            ))}
          </View>
        )}
      </ScrollView>
    </SafeAreaView>
  );
};

// üë§ PROFILE SCREEN
const ProfileScreen = ({ navigation }) => {
  const [user, setUser] = useState(null);
  
  useEffect(() => {
    loadUser();
  }, []);
  
  const loadUser = async () => {
    const userData = await AsyncStorage.getItem('user');
    if (userData) {
      setUser(JSON.parse(userData));
    }
  };
  
  const handleLogout = async () => {
    await AsyncStorage.clear();
    navigation.replace('Login');
  };
  
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: COLORS.background }}>
      <ScrollView contentContainerStyle={{ padding: SPACING.lg }}>
        <Card style={{ alignItems: 'center', marginBottom: SPACING.lg }}>
          <View style={{ width: 100, height: 100, borderRadius: 50, backgroundColor: COLORS.primary, alignItems: 'center', justifyContent: 'center', marginBottom: SPACING.md }}>
            <Ionicons name="person" size={48} color="#fff" />
          </View>
          {user && (
            <>
              <Text style={{ color: COLORS.textPrimary, fontSize: 24, fontWeight: 'bold' }}>{user.username}</Text>
              <Text style={{ color: COLORS.textSecondary, marginTop: 4 }}>{user.email}</Text>
              <View style={{ flexDirection: 'row', marginTop: SPACING.md }}>
                <View style={{ paddingHorizontal: SPACING.lg, paddingVertical: SPACING.xs, backgroundColor: `${COLORS.primary}20`, borderRadius: BORDER_RADIUS.full, marginRight: SPACING.sm }}>
                  <Text style={{ color: COLORS.primary, fontWeight: '600' }}>{user.tier || 'Free'}</Text>
                </View>
                <View style={{ paddingHorizontal: SPACING.lg, paddingVertical: SPACING.xs, backgroundColor: `${COLORS.secondary}20`, borderRadius: BORDER_RADIUS.full }}>
                  <Text style={{ color: COLORS.secondary, fontWeight: '600' }}>{user.credits || 0} credits</Text>
                </View>
              </View>
            </>
          )}
        </Card>
        
        <Card style={{ marginBottom: SPACING.lg }}>
          <Text style={{ color: COLORS.textPrimary, fontSize: 18, fontWeight: '600', marginBottom: SPACING.md }}>Account</Text>
          
          <TouchableOpacity style={{ flexDirection: 'row', alignItems: 'center', paddingVertical: SPACING.md, borderBottomWidth: 1, borderBottomColor: COLORS.border }}>
            <Ionicons name="card" size={24} color={COLORS.primary} style={{ marginRight: SPACING.md }} />
            <Text style={{ color: COLORS.textPrimary, flex: 1 }}>Subscription</Text>
            <Ionicons name="chevron-forward" size={20} color={COLORS.textSecondary} />
          </TouchableOpacity>
          
          <TouchableOpacity style={{ flexDirection: 'row', alignItems: 'center', paddingVertical: SPACING.md, borderBottomWidth: 1, borderBottomColor: COLORS.border }}>
            <Ionicons name="settings" size={24} color={COLORS.primary} style={{ marginRight: SPACING.md }} />
            <Text style={{ color: COLORS.textPrimary, flex: 1 }}>Settings</Text>
            <Ionicons name="chevron-forward" size={20} color={COLORS.textSecondary} />
          </TouchableOpacity>
          
          <TouchableOpacity style={{ flexDirection: 'row', alignItems: 'center', paddingVertical: SPACING.md }}>
            <Ionicons name="help-circle" size={24} color={COLORS.primary} style={{ marginRight: SPACING.md }} />
            <Text style={{ color: COLORS.textPrimary, flex: 1 }}>Help & Support</Text>
            <Ionicons name="chevron-forward" size={20} color={COLORS.textSecondary} />
          </TouchableOpacity>
        </Card>
        
        <Button title="Log Out" onPress={handleLogout} variant="outline" />
      </ScrollView>
    </SafeAreaView>
  );
};

// üì± TAB NAVIGATOR
const Tab = createBottomTabNavigator();
function MainTabs() {
  return (
    <Tab.Navigator
      screenOptions={({ route }) => ({
        tabBarIcon: ({ focused, color, size }) => {
          let iconName;
          if (route.name === 'Home') iconName = focused ? 'home' : 'home-outline';
          else if (route.name === 'Create') iconName = focused ? 'add-circle' : 'add-circle-outline';
          else if (route.name === 'Gallery') iconName = focused ? 'film' : 'film-outline';
          else if (route.name === 'Profile') iconName = focused ? 'person' : 'person-outline';
          return <Ionicons name={iconName} size={size} color={color} />;
        },
        tabBarActiveTintColor: COLORS.primary,
        tabBarInactiveTintColor: COLORS.textSecondary,
        tabBarStyle: { backgroundColor: COLORS.surface, borderTopColor: COLORS.border },
        headerShown: false
      })}
    >
      <Tab.Screen name="Home" component={HomeScreen} />
      <Tab.Screen name="Create" component={CreateScreen} />
      <Tab.Screen name="Gallery" component={GalleryScreen} />
      <Tab.Screen name="Profile" component={ProfileScreen} />
    </Tab.Navigator>
  );
}

// üß≠ MAIN NAVIGATOR
const Stack = createNativeStackNavigator();
function AppNavigator() {
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  const [checking, setChecking] = useState(true);
  
  useEffect(() => {
    checkAuth();
  }, []);
  
  const checkAuth = async () => {
    const token = await AsyncStorage.getItem('token');
    setIsLoggedIn(!!token);
    setChecking(false);
  };
  
  if (checking) {
    return (
      <View style={{ flex: 1, backgroundColor: COLORS.background, justifyContent: 'center', alignItems: 'center' }}>
        <ActivityIndicator size="large" color={COLORS.primary} />
        <Text style={{ color: COLORS.textPrimary, marginTop: SPACING.md }}>Loading...</Text>
      </View>
    );
  }
  
  return (
    <NavigationContainer>
      <Stack.Navigator screenOptions={{ headerShown: false }}>
        {!isLoggedIn ? (
          <>
            <Stack.Screen name="Login" component={LoginScreen} />
            <Stack.Screen name="Register" component={RegisterScreen} />
          </>
        ) : (
          <Stack.Screen name="Main" component={MainTabs} />
        )}
      </Stack.Navigator>
    </NavigationContainer>
  );
}

// üéØ MAIN APP COMPONENT
export default function App() {
  return (
    <StripeProvider
      publishableKey="pk_test_your_key_here"
      merchantIdentifier="merchant.com.aivideoapp"
    >
      <AppNavigator />
    </StripeProvider>
  );
}

// ============================================
// üñ•Ô∏è BACKEND - NODE.JS + EXPRESS
// ============================================

// server.js - BACKEND SERVER
const express = require('express');
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const cors = require('cors');
const multer = require('multer');
const fs = require('fs').promises;
const path = require('path');
const { v4: uuidv4 } = require('uuid');
const axios = require('axios');
const ffmpeg = require('fluent-ffmpeg');

const app = express();
const PORT = 3000;

// Middleware
app.use(cors());
app.use(express.json({ limit: '50mb' }));
app.use('/videos', express.static('uploads/videos'));

// Database connection
mongoose.connect('mongodb://localhost:27017/ai_video_app', {
  useNewUrlParser: true,
  useUnifiedTopology: true
});

// Models
const UserSchema = new mongoose.Schema({
  email: { type: String, required: true, unique: true },
  username: { type: String, required: true, unique: true },
  password: { type: String, required: true },
  tier: { type: String, default: 'free' },
  credits: { type: Number, default: 10 },
  settings: {
    watermark: {
      text: String,
      position: { type: String, default: 'bottom-right' },
      opacity: { type: Number, default: 0.7 },
      enabled: { type: Boolean, default: true }
    }
  },
  createdAt: { type: Date, default: Date.now }
});

const VideoSchema = new mongoose.Schema({
  userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
  originalImage: String,
  videoPath: String,
  thumbnailPath: String,
  task: String,
  duration: Number,
  watermarkSettings: Object,
  creditsUsed: Number,
  createdAt: { type: Date, default: Date.now }
});

const User = mongoose.model('User', UserSchema);
const Video = mongoose.model('Video', VideoSchema);

// Auth middleware
const authMiddleware = async (req, res, next) => {
  try {
    const token = req.headers.authorization?.split(' ')[1];
    if (!token) return res.status(401).json({ error: 'No token provided' });
    
    const decoded = jwt.verify(token, 'your_jwt_secret');
    const user = await User.findById(decoded.userId);
    if (!user) return res.status(401).json({ error: 'Invalid token' });
    
    req.user = user;
    next();
  } catch (error) {
    res.status(401).json({ error: 'Invalid token' });
  }
};

// Upload middleware
const storage = multer.diskStorage({
  destination: 'uploads/images/',
  filename: (req, file, cb) => {
    cb(null, `${uuidv4()}.jpg`);
  }
});
const upload = multer({ storage });

// AI Service Configuration
const AI_SERVICES = {
  TASKS: {
    zoom: { prompt: 'cinematic zoom in effect, professional cinematography', duration: 3 },
    pan: { prompt: 'smooth pan movement, reveal scene', duration: 4 },
    particles: { prompt: 'magical particle effects, sparkles', duration: 5 },
    neon: { prompt: 'neon glow, cyberpunk style', duration: 4 },
    water: { prompt: 'water reflection animation', duration: 3 }
  }
};

// Routes
app.post('/api/auth/register', async (req, res) => {
  try {
    const { email, password, username } = req.body;
    
    const existingUser = await User.findOne({ $or: [{ email }, { username }] });
    if (existingUser) {
      return res.status(400).json({ error: 'User already exists' });
    }
    
    const hashedPassword = await bcrypt.hash(password, 10);
    const user = new User({ email, password: hashedPassword, username });
    await user.save();
    
    const token = jwt.sign({ userId: user._id }, 'your_jwt_secret', { expiresIn: '7d' });
    
    res.json({
      user: {
        id: user._id,
        email: user.email,
        username: user.username,
        tier: user.tier,
        credits: user.credits
      },
      accessToken: token
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

app.post('/api/auth/login', async (req, res) => {
  try {
    const { email, password } = req.body;
    
    const user = await User.findOne({ email });
    if (!user) {
      return res.status(401).json({ error: 'Invalid credentials' });
    }
    
    const isValidPassword = await bcrypt.compare(password, user.password);
    if (!isValidPassword) {
      return res.status(401).json({ error: 'Invalid credentials' });
    }
    
    const token = jwt.sign({ userId: user._id }, 'your_jwt_secret', { expiresIn: '7d' });
    
    res.json({
      user: {
        id: user._id,
        email: user.email,
        username: user.username,
        tier: user.tier,
        credits: user.credits
      },
      accessToken: token
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

app.post('/api/video/generate', authMiddleware, async (req, res) => {
  try {
    const { image, taskId, watermark } = req.body;
    const user = req.user;
    
    // Check task
    const task = AI_SERVICES.TASKS[taskId];
    if (!task) {
      return res.status(400).json({ error: 'Invalid task' });
    }
    
    // Check credits
    const creditsNeeded = task.duration * (user.tier === 'free' ? 2 : 1);
    if (user.credits < creditsNeeded) {
      return res.status(402).json({ error: 'Insufficient credits' });
    }
    
    // Save image
    const imageId = uuidv4();
    const imagePath = path.join('uploads/images', `${imageId}.jpg`);
    await fs.writeFile(imagePath, Buffer.from(image, 'base64'));
    
    // In production: Call actual AI service (Domo AI, RunwayML, etc.)
    // This is a simulation - replace with actual AI API call
    const videoId = uuidv4();
    const videoPath = path.join('uploads/videos', `${videoId}.mp4`);
    
    // Simulate AI video generation
    // For real implementation, you would call:
    // const aiResponse = await axios.post('https://api.domo.ai/v1/generate', {
    //   image: `data:image/jpeg;base64,${image}`,
    //   prompt: task.prompt,
    //   duration: task.duration
    // });
    
    // Create a dummy video file (in production, use actual AI service)
    await fs.writeFile(videoPath, Buffer.from('dummy video content'));
    
    // Apply watermark if enabled
    let finalVideoPath = videoPath;
    if (watermark.enabled) {
      finalVideoPath = await applyWatermark(videoPath, watermark);
    }
    
    // Generate thumbnail
    const thumbnailPath = await generateThumbnail(finalVideoPath);
    
    // Create video record
    const video = new Video({
      userId: user._id,
      originalImage: imagePath,
      videoPath: finalVideoPath,
      thumbnailPath,
      task: taskId,
      duration: task.duration,
      watermarkSettings: watermark,
      creditsUsed: creditsNeeded
    });
    await video.save();
    
    // Update user credits
    user.credits -= creditsNeeded;
    await user.save();
    
    res.json({
      videoUrl: `/videos/${path.basename(finalVideoPath)}`,
      thumbnailUrl: `/videos/${path.basename(thumbnailPath)}`,
      creditsUsed: creditsNeeded,
      remainingCredits: user.credits
    });
  } catch (error) {
    console.error('Video generation error:', error);
    res.status(500).json({ error: 'Video generation failed' });
  }
});

app.get('/api/video/videos', authMiddleware, async (req, res) => {
  try {
    const videos = await Video.find({ userId: req.user._id }).sort({ createdAt: -1 });
    
    res.json({
      videos: videos.map(v => ({
        id: v._id,
        videoUrl: v.videoPath,
        thumbnailUrl: v.thumbnailPath,
        task: v.task,
        duration: v.duration,
        createdAt: v.createdAt,
        creditsUsed: v.creditsUsed
      }))
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Utility functions
async function applyWatermark(videoPath, watermark) {
  return new Promise((resolve, reject) => {
    const outputPath = videoPath.replace('.mp4', '_watermarked.mp4');
    
    const positionMap = {
      'top-left': '10:10',
      'top-right': 'main_w-text_w-10:10',
      'bottom-left': '10:main_h-text_h-10',
      'bottom-right': 'main_w-text_w-10:main_h-text_h-10',
      'center': '(main_w-text_w)/2:(main_h-text_h)/2'
    };
    
    ffmpeg(videoPath)
      .videoFilters([{
        filter: 'drawtext',
        options: {
          text: watermark.text,
          fontcolor: 'white',
          fontsize: 24,
          x: positionMap[watermark.position] || 'main_w-text_w-10:main_h-text_h-10',
          alpha: watermark.opacity || 0.7,
          box: 1,
          boxcolor: 'black@0.5',
          boxborderw: 5
        }
      }])
      .on('end', () => resolve(outputPath))
      .on('error', reject)
      .save(outputPath);
  });
}

async function generateThumbnail(videoPath) {
  return new Promise((resolve, reject) => {
    const thumbnailPath = videoPath.replace('.mp4', '_thumb.jpg');
    
    ffmpeg(videoPath)
      .screenshots({
        timestamps: ['00:00:01'],
        filename: path.basename(thumbnailPath),
        folder: path.dirname(thumbnailPath),
        size: '640x360'
      })
      .on('end', () => resolve(thumbnailPath))
      .on('error', reject);
  });
}

// Health check
app.get('/api/health', (req, res) => {
  res.json({ status: 'healthy', timestamp: new Date().toISOString() });
});

// Start server
app.listen(PORT, () => {
  console.log(`üöÄ Backend server running on http://localhost:${PORT}`);
  console.log(`üìÅ Video storage: ${path.join(__dirname, 'uploads/videos')}`);
});

// ============================================
// üì¶ PACKAGE.JSON FILES
// ============================================

/* FRONTEND package.json:
{
  "name": "ai-video-app",
  "version": "1.0.0",
  "main": "node_modules/expo/AppEntry.js",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "expo": "^49.0.0",
    "expo-image-picker": "^14.3.2",
    "expo-file-system": "^15.4.4",
    "expo-linear-gradient": "^12.3.0",
    "react": "18.2.0",
    "react-native": "0.72.5",
    "@react-navigation/native": "^6.1.7",
    "@react-navigation/bottom-tabs": "^6.5.8",
    "@react-navigation/native-stack": "^6.9.13",
    "@stripe/stripe-react-native": "^0.26.0",
    "@expo/vector-icons": "^13.0.0",
    "@react-native-async-storage/async-storage": "^1.18.2",
    "axios": "^1.5.0"
  }
}
*/

/* BACKEND package.json:
{
  "name": "ai-video-backend",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "^7.4.3",
    "bcryptjs": "^2.4.3",
    "jsonwebtoken": "^9.0.2",
    "cors": "^2.8.5",
    "multer": "^1.4.5-lts.1",
    "fluent-ffmpeg": "^2.1.2",
    "uuid": "^9.0.0",
    "axios": "^1.5.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
*/

// ============================================
// üê≥ DOCKER CONFIGURATION
// ============================================

/* docker-compose.yml:
version: '3.8'

services:
  mongodb:
    image: mongo:6
    container_name: ai-video-mongodb
    restart: unless-stopped
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db

  backend:
    build: ./backend
    container_name: ai-video-backend
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      NODE_ENV: production
      MONGODB_URI: mongodb://mongodb:27017/ai_video_app
      JWT_SECRET: your_jwt_secret
    volumes:
      - ./uploads:/app/uploads
    depends_on:
      - mongodb

volumes:
  mongodb_data:
*/

/* backend/Dockerfile:
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

RUN apk add --no-cache ffmpeg

COPY . .

USER node

EXPOSE 3000

CMD ["node", "server.js"]
*/

// ============================================
# üöÄ SETUP INSTRUCTIONS
# ============================================

# 1. Clone your repository
git clone https://github.com/Nagdoniya/Ai.git ai-video-app
cd ai-video-app

# 2. Create frontend directory
mkdir frontend
# Create App.js with the frontend code above
# Create package.json with frontend dependencies

# 3. Create backend directory
mkdir backend
# Create server.js with the backend code above
# Create package.json with backend dependencies

# 4. Create uploads directory
mkdir -p uploads/{images,videos}

# 5. Install frontend dependencies
cd frontend
npm install

# 6. Install backend dependencies
cd ../backend
npm install

# 7. Install FFmpeg (required for backend)
# On Mac: brew install ffmpeg
# On Ubuntu: sudo apt install ffmpeg
# On Windows: Download from ffmpeg.org

# 8. Start MongoDB (required)
# On Mac: brew services start mongodb-community
# On Ubuntu: sudo systemctl start mongod
# Or use Docker: docker run -d -p 27017:27017 mongo:6

# 9. Start backend server
cd backend
npm start

# 10. Start frontend (in new terminal)
cd frontend
npm start

# 11. Scan QR code with Expo Go app on your phone
# OR use Android/iOS simulator

# ============================================
# üîë ENVIRONMENT CONFIGURATION
# ============================================

# Create .env file in backend:
JWT_SECRET=your_super_secret_jwt_key
MONGODB_URI=mongodb://localhost:27017/ai_video_app

# For production AI services (add to .env):
DOMO_AI_KEY=your_domo_ai_key_here
RUNWAY_ML_KEY=your_runwayml_key_here
STABILITY_AI_KEY=your_stability_key_here

# ============================================
# üéØ FEATURES SUMMARY
# ============================================

# ‚úÖ Complete React Native mobile app
# ‚úÖ Node.js/Express backend
# ‚úÖ User authentication (register/login)
# ‚úÖ Photo upload and selection
# ‚úÖ Multiple AI video effects
# ‚úÖ Custom watermark with settings
# ‚úÖ Credit-based system
# ‚úÖ Video gallery
# ‚úÖ User profile
# ‚úÖ MongoDB database
# ‚úÖ Docker support
# ‚úÖ Modular and scalable

# ============================================
# üìû TROUBLESHOOTING
# ============================================

# 1. MongoDB connection error:
#    - Ensure MongoDB is running
#    - Check connection string

# 2. FFmpeg not found:
#    - Install FFmpeg on your system
#    - Add to PATH if on Windows

# 3. Expo build issues:
#    - Clear cache: expo start --clear
#    - Update Expo: npm install expo@latest

# 4. Backend API errors:
#    - Check CORS settings
#    - Verify JWT secret
#    - Check file permissions

# ============================================
# üöÄ DEPLOYMENT
# ============================================

# Option 1: Local deployment with Docker
docker-compose up -d

# Option 2: Deploy backend to Heroku/Railway
# Option 3: Deploy frontend to Expo

# ============================================
# üì± APP SCREENS
# ============================================

# 1. Login Screen - User authentication
# 2. Register Screen - Account creation
# 3. Home Screen - Dashboard and quick actions
# 4. Create Screen - Photo upload + effect selection
# 5. Gallery Screen - Generated videos
# 6. Profile Screen - User account and settings

# ============================================
# üîß API ENDPOINTS
# ============================================

# POST   /api/auth/register    - Register user
# POST   /api/auth/login       - Login user
# POST   /api/video/generate   - Generate video
# GET    /api/video/videos     - Get user videos
# GET    /api/health          - Health check

# ============================================
# üí° NEXT STEPS FOR PRODUCTION
# ============================================

# 1. Add actual AI service integration (Domo AI, RunwayML)
# 2. Implement payment system (Stripe)
# 3. Add social sharing
# 4. Implement video editing features
# 5. Add admin dashboard
# 6. Set up CDN for video delivery
# 7. Add analytics
# 8. Implement push notifications
